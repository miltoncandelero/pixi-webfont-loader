/* eslint-disable */
this.PIXI=this.PIXI||{},this.PIXI.WebfontLoaderPlugin=this.PIXI.WebfontLoaderPlugin||{},function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@pixi/loaders")):"function"==typeof define&&define.amd?define(["exports","@pixi/loaders"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)._pixi_font={},t.PIXI)}(this,(function(t,e){"use strict";function o(t){const e=/\s*([a-z\-]+)\s*:\s*((?:[^;]*url\(.*?\)[^;]*|[^;]*)*)\s*(?:;|$)/gi,o={};let s;for(;s=e.exec(t);)o[s[1].toLowerCase()]=s[2];return o}function s(t){let e="";const o=Object.keys(t).sort();for(let s=0;s<o.length;s++)e+=` ${o[s]}: ${t[o[s]]};`;return e.substring(1)}function n(t,e){return null!=t?t:e()}function a(t){let e,o=t[0],s=1;for(;s<t.length;){const n=t[s],a=t[s+1];if(s+=2,("optionalAccess"===n||"optionalCall"===n)&&null==o)return;"access"===n||"optionalAccess"===n?(e=o,o=a(o)):"call"!==n&&"optionalCall"!==n||(o=a(((...t)=>o.call(e,...t))),e=void 0)}return o}class i{static __initStatic(){this.supportedFontExtensions=["ttf","otf","woff","woff2"]}static add(...t){if(!document.fonts||!FontFace||!Promise)throw new Error("WebfontLoaderPlugin relies heavily on Promises and the FontFace API and your browser doesn't support them.");e.LoaderResource.setExtensionLoadType("css",e.LoaderResource.LOAD_TYPE.XHR),e.LoaderResource.setExtensionXhrType("css",e.LoaderResource.XHR_RESPONSE_TYPE.TEXT),e.LoaderResource.setExtensionLoadType("ttf",e.LoaderResource.LOAD_TYPE.XHR),e.LoaderResource.setExtensionXhrType("ttf",e.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);for(const t of i.supportedFontExtensions)e.LoaderResource.setExtensionLoadType(t,e.LoaderResource.LOAD_TYPE.XHR),e.LoaderResource.setExtensionXhrType(t,e.LoaderResource.XHR_RESPONSE_TYPE.BUFFER)}static use(t,e){t.extension.endsWith("css")?i.loadFromCSS(t).finally((()=>e())):i.supportedFontExtensions.some((e=>t.extension.endsWith(e)))?i.loadFromBuffer(t).finally((()=>e())):e()}static __initStatic2(){this.waitFont=async(t,e,o)=>{const s=n(t["font-style"],(()=>"")),a=n(t["font-weight"],(()=>"")),i=n(t["font-stretch"],(()=>"")),c=t["font-family"];o=o||1/0;let l=(new Date).getTime();const r=l,f=[s,a,i,"100px",c].join(" ");let d=0;do{if(d=(await document.fonts.load(f,e)).length,d>0)return;await new Promise((t=>setTimeout(t,16))),l=(new Date).getTime()}while(l-r<o);console.warn(`Error loading font! Your font ${t["font-family"]} timed out after ${o}ms`)}}static loadFromCSS(t){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t.url,document.head.appendChild(e);const c=function(t){const e=/([\s\S]+?)\{([\s\S]*?)\}/gi,n=[];let a,i;for(t=t.replace(/\/\*[\s\S]*?\*\//g,"");i=e.exec(t);){const t=o(i[2].trim());t.cssText=s(t),a={selectorText:i[1].trim().replace(/\s*\,\s*/,", "),style:t,cssText:""},a.cssText=`${a.selectorText} { ${a.style.cssText} }`,n.push(a)}return n}(t.data),l=[],r=[],f=a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.testString]),d=n(a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.timeout]),(()=>t.timeout));for(const t of c)"string"==typeof t.style["font-family"]&&(l.push(i.waitFont(t.style,f,d)),r.push({fontFamily:t.style["font-family"].replace(/['|"]/gi,""),fontStyle:t.style["font-style"],fontWeight:t.style["font-weight"]}));return t.styles=r,Promise.all(l)}static loadFromBuffer(t){const e=n(a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.family]),(()=>t.name));return document.fonts.add(new FontFace(e,t.data,a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font]))),t.styles=[{fontFamily:e.replace(/['|"]/gi,""),fontStyle:a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.style]),fontWeight:a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.weight])}],i.waitFont({"font-family":e,"font-stretch":a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.stretch]),"font-style":a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.style]),"font-weight":a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.weight])},a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.testString]),n(a([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.timeout]),(()=>t.timeout)))}}i.__initStatic(),i.__initStatic2(),t.WebfontLoaderPlugin=i,Object.defineProperty(t,"__esModule",{value:!0})})),"undefined"!=typeof _pixi_font&&Object.assign(this.PIXI.WebfontLoaderPlugin,_pixi_font);
//# sourceMappingURL=pixi-font-loader.umd.min.js.map
